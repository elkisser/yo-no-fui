---
import MainLayout from "../layouts/MainLayout.astro";
import GeneradorCaso from "../components/juego/GeneradorCaso";
import { ArrowLeft, Sparkles, Shield, Zap, Lock } from "lucide-react";
---

<MainLayout>
  <div class="min-h-screen bg-fondo-principal" data-guide="nuevo-caso-root">
    {/* Header minimalista */}
    <div class="relative overflow-hidden">
      <div class="max-w-6xl mx-auto px-4 pt-12 pb-8">
        {/* Botón de volver elegante */}
        <div class="mb-8">
          <a
            href="/"
            class="inline-flex items-center text-texto-secundario hover:text-texto-principal transition-colors group"
          >
            <div
              class="flex items-center gap-2 p-2 rounded-lg hover:bg-fondo-panel/30 transition-colors"
            >
              <ArrowLeft className="w-4 h-4" />
              <span class="text-sm font-medium">Volver al inicio</span>
            </div>
          </a>
        </div>

        {/* Título principal */}
        <div class="text-center mb-12">
          <h1 class="text-4xl md:text-5xl font-serif font-bold mb-4">
            <span
              class="bg-gradient-to-r from-acento-azul to-acento-turquesa bg-clip-text text-transparent"
            >
              Generar Caso
            </span>
          </h1>
          <p class="text-lg text-texto-secundario max-w-2xl mx-auto">
            Configura los parámetros de tu investigación y genera un misterio
            único
          </p>
        </div>
      </div>
    </div>

    {/* Contenido principal - Layout de 2 columnas */}
    <div class="max-w-6xl mx-auto px-4 pb-16">
      <div class="grid lg:grid-cols-3 gap-8">
        {/* Panel lateral - Características */}
        <div class="space-y-6">
          {/* Tarjeta de características */}
          <div
            class="bg-fondo-panel/50 border border-fondo-borde rounded-xl p-6"
          >
            <h3
              class="text-lg font-serif text-texto-principal mb-4 flex items-center gap-2"
            >
              <Sparkles className="w-5 h-5 text-acento-azul" />
              Características
            </h3>

            <ul class="space-y-4">
              <li class="flex items-start gap-3">
                <div
                  class="w-6 h-6 rounded-full bg-acento-azul/20 flex items-center justify-center flex-shrink-0 mt-0.5"
                >
                  <Zap className="w-3 h-3 text-acento-azul" />
                </div>
                <div>
                  <p class="text-sm font-medium text-texto-principal">
                    Generación por IA
                  </p>
                  <p class="text-xs text-texto-secundario mt-0.5">
                    Cada caso es único e irrepetible
                  </p>
                </div>
              </li>

              <li class="flex items-start gap-3">
                <div
                  class="w-6 h-6 rounded-full bg-acento-turquesa/20 flex items-center justify-center flex-shrink-0 mt-0.5"
                >
                  <Lock className="w-3 h-3 text-acento-turquesa" />
                </div>
                <div>
                  <p class="text-sm font-medium text-texto-principal">
                    Progreso guardado
                  </p>
                  <p class="text-xs text-texto-secundario mt-0.5">
                    Continúa donde lo dejaste
                  </p>
                </div>
              </li>

              <li class="flex items-start gap-3">
                <div
                  class="w-6 h-6 rounded-full bg-acento-azul/20 flex items-center justify-center flex-shrink-0 mt-0.5"
                >
                  <Shield className="w-3 h-3 text-acento-azul" />
                </div>
                <div>
                  <p class="text-sm font-medium text-texto-principal">
                    Sin registro
                  </p>
                  <p class="text-xs text-texto-secundario mt-0.5">
                    Comienza a investigar al instante
                  </p>
                </div>
              </li>
            </ul>
          </div>

          {/* Tarjeta de estadísticas */}
          <div
            class="bg-fondo-panel/50 border border-fondo-borde rounded-xl p-6"
          >
            <h3 class="text-lg font-serif text-texto-principal mb-4">
              Tu actividad
            </h3>

            <div class="space-y-4">
              <div class="flex justify-between items-center">
                <span class="text-sm text-texto-secundario"
                  >Casos resueltos</span
                >
                <span class="text-acento-turquesa font-medium">0</span>
              </div>

              <div class="flex justify-between items-center">
                <span class="text-sm text-texto-secundario"
                  >Tiempo invertido</span
                >
                <span class="text-texto-principal font-medium">0h 0m</span>
              </div>

              <div class="flex justify-between items-center">
                <span class="text-sm text-texto-secundario">Precisión</span>
                <span class="text-texto-principal font-medium">0%</span>
              </div>
            </div>
          </div>

          {/* Nota informativa */}
          <div
            class="bg-acento-azul/5 border border-acento-azul/20 rounded-xl p-4"
          >
            <p class="text-xs text-acento-azul leading-relaxed">
              ⚡ La generación toma 15-30 segundos. Cada caso es una narrativa
              original creada en tiempo real.
            </p>
          </div>
        </div>

        {/* Panel principal - Formulario */}
        <div class="lg:col-span-2">
          <div class="relative">
            {/* Efecto de borde sutil */}
            <div
              class="absolute -inset-0.5 bg-gradient-to-r from-acento-azul/20 to-acento-turquesa/20 rounded-xl blur opacity-0 group-hover:opacity-100 transition-opacity duration-500"
            >
            </div>

            <div class="relative">
              <GeneradorCaso client:load />
            </div>
          </div>

          {/* Instrucciones simples */}
          <div class="mt-8 pt-8 border-t border-fondo-borde">
            <h3
              class="text-lg font-serif text-texto-principal mb-4 text-center"
            >
              Proceso de investigación
            </h3>

            <div class="grid grid-cols-4 gap-4">
              {
                [
                  { step: "1", title: "Generar", desc: "Crea el caso" },
                  { step: "2", title: "Investigar", desc: "Analiza pistas" },
                  { step: "3", title: "Deducir", desc: "Formula teoría" },
                  {
                    step: "4",
                    title: "Resolver",
                    desc: "Encuentra al culpable",
                  },
                ].map((item) => (
                  <div class="text-center">
                    <div class="w-10 h-10 mx-auto mb-2 rounded-full bg-fondo-panel border border-fondo-borde flex items-center justify-center text-texto-principal font-medium">
                      {item.step}
                    </div>
                    <div class="text-sm font-medium text-texto-principal">
                      {item.title}
                    </div>
                    <div class="text-xs text-texto-secundario mt-1">
                      {item.desc}
                    </div>
                  </div>
                ))
              }
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <style>
    /* Animaciones sutiles */
    @keyframes subtleGlow {
      0%,
      100% {
        opacity: 0.5;
      }
      50% {
        opacity: 0.8;
      }
    }

    .animate-subtle-glow {
      animation: subtleGlow 4s ease-in-out infinite;
    }
  </style>
</MainLayout>
